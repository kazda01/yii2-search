let e=!1,t="";function s(s,a){let c=a.data("search-id");a.val().length>=4||e?(13==s.keyCode&&(e=!0),a.val().length>0?function(e,s){e.val()!=t&&(t=e.val(),$.ajax({type:"POST",url:`/${s}/search`,data:{search:`${e.val()}`},success:function(e){$(`#search-widget-${s}`).html(e),$(`#search-widget-${s}`).children().length>0&&($(`#search-widget-${s}`).children().last().removeClass("border-bottom"),$(`#search-widget-${s}`).find(".stretched-link.search-focus").last().attr("data-last","true"),$(`#search-widget-${s}`).find(".stretched-link.search-focus").first().attr("data-first","true"))},error:function(e){console.log(e)}})),$(`#search-widget-${s}`).fadeIn()}(a,c):$(`#search-widget-${c}`).fadeOut()):($(`#search-widget-${c}`).fadeOut(),e=!1)}$(".search-button").on("click",(function(t){e=!0;let a=$(this).next();s(t,a),a.focus()})),$(".search-input").on("keyup",(function(e){13!=e.keyCode&&s(e,$(this))})),$("body").on("keydown",".search-focus.stretched-link, .search-input",(function(e){27==e.keyCode?$("input.search-input, .search-widget a").blur():9==e.keyCode&&e.shiftKey||38==e.keyCode?(e.preventDefault(),$(e.target).data("first")?$(this).closest(".search-widget").prev().focus():"A"==$(this).prop("tagName")&&(0!=$(this).parent().prev(".search-result").length?$(this).parent().prev().find(".search-focus.stretched-link").first().focus():$(this).closest(".container-fluid").prev().find(".search-focus.stretched-link").last().focus())):9!=e.keyCode&&40!=e.keyCode||(e.preventDefault(),$(e.target).data("last")?$(".search-focus[data-first='true']").focus():"INPUT"==$(this).prop("tagName")?$(this).next().find(".search-focus.stretched-link").first().focus():0!=$(this).parent().next(".search-result").length?$(this).parent().next().find(".search-focus.stretched-link").first().focus():$(this).closest(".container-fluid").next().find(".search-focus.stretched-link").first().focus())})),$("body").on("focusout","input.search-input, .search-widget a",(function(){let s=$(this),a=s.data("search-id");setTimeout((function(){(!$(document.activeElement).hasClass("search-focus")||"INPUT"==$(document.activeElement).prop("tagName")&&a!=$(document.activeElement).data("search-id"))&&(s.closest(".input-group").find(".search-widget").fadeOut(),e=!1,t="")}),100)})),$("body").on("focus",".search-widget a",(function(){$(".search-result").removeClass("focus"),$(this).closest(".search-result").addClass("focus")})),$("body").on("focus",".search-input",(function(){$(".search-result").removeClass("focus")}));